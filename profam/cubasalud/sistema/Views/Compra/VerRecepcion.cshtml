@model sistema.Models.CompraBaseViewModel

@{

  decimal suma= 0.00m;
}

<div class="form-row">
    <div class="col-md-12">

        @await Html.PartialAsync("_MensajeExito")

        <div class="form">
            <div class="col-md-12">

                    <a href="@Url.Action("ValidarProductosInventario","Compra", new {id = @Model.Recepcion.Id})" class="btn btn-warning">
                                    Validar
                    </a>
                    <br/> <br/>
                <div class="main-card mb-3 card">
                    <div class="card-body">

                        <fieldset disabled>
                            <div class="form-row">
                                <div class="col-md-12">
                                    <div class="position-relative form-group"><label class="">No.
                                            Comprobante</label>
                                        @* <input placeholder="Descripción Producto" class="form-control"> *@
                                        @Html.TextBoxFor(a => a.Recepcion.Compra.NoComprobante, new
                                                                   {@class="form-control",@id="nocomprobante", @placeholder="No. Comprobante"})
                                        @Html.ValidationMessageFor(a => a.Recepcion.Compra.NoComprobante, "", new { @class =
                                                                       "text-danger"})
                                    </div>
                                </div>

                            </div>
                            <div class="form-row">
                                 <div class="col-md-6">
                                    <div class="position-relative form-group"><label class="">Proveedor</label>
                                        @* <input placeholder="Descripción Producto" class="form-control"> *@
                                        @Html.TextBoxFor(a => a.Recepcion.Compra.Proveedor.Nombre, new
                                                                   {@class="form-control",@id="nombrevendedor",
                                                                       @placeholder="Proveedor"})
                                        @Html.ValidationMessageFor(a => a.Recepcion.Compra.Proveedor.Nombre, "", new { @class =
                                                                       "text-danger"})
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="position-relative form-group"><label class="">Nombre
                                            Vendedor</label>
                                        @* <input placeholder="Descripción Producto" class="form-control"> *@
                                        @Html.TextBoxFor(a => a.Recepcion.Compra.NombreVendedor, new
                                                                   {@class="form-control",@id="nombrevendedor",
                                                                       @placeholder="Nombre Vendedor"})
                                        @Html.ValidationMessageFor(a => a.Recepcion.Compra.NombreVendedor, "", new { @class =
                                                                       "text-danger"})
                                    </div>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="col-md-6">
                                    <div class="position-relative form-group"><label class="">Fecha Limite</label>
                                        @* <input placeholder="Descripción Producto" class="form-control"> *@
                                        @Html.TextBoxFor(a => a.Recepcion.Compra.FechaLimite, new
                                                                   {type="date",@class="form-control",@id="fechalimite",
                                                                       @placeholder="Nombres"})
                                        @Html.ValidationMessageFor(a => a.Recepcion.Compra.FechaLimite, "", new { @class =
                                                                       "text-danger"})
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="position-relative form-group"><label class="">Fecha
                                            Recepcion</label>
                                        @* <input placeholder="Descripción Producto" class="form-control"> *@
                                        @Html.TextBoxFor(a => a.Recepcion.Compra.FechaRecepcion, new
                                                                   {type="date", @class="form-control",@id="fecharecepcion",
                                                                       @placeholder="Direccion"})
                                        @Html.ValidationMessageFor(a => a.Recepcion.Compra.FechaRecepcion, "", new { @class =
                                                                       "text-danger"})
                                    </div>
                                </div>
                            </div>

                       
                        <br/>

                        <div class="table-responsive">
                            <table class='table'>
                                <thead>
                                    <tr>
                                        <th>Codigo</th>
                                        <th>Nombre Producto</th>
                                        <th>Cantidad</th>
                                        <th>Precio Costo</th>
                                        <th>Total</th>
                                    </tr>
                                </thead>
                                <tbody>
                                   
                                        @foreach (var item in Model.Recepcion.Compra.DetalleCompras)
                                        {
                                            <tr>
                                                <td>@item.Producto.CodigoReferencia</td>
                                                <td>@item.Producto.NombreProducto</td>
                                                <td>@item.Cantidad</td>
                                                <td>@item.Precio</td>
                                                <td>@item.PrecioTotal</td>

                                                @if (item.Compra.Estado == false)
                                                {
                                                    <td> <button type="button" class="btn btn-danger btn-sm"
                                                            onclick="eliminarFilaC(this,@item.Precio)">Quitar</button></td>
                                                }
                                                <td style="display: none;" class="idProd">@item.Id</td>
                                            </tr>
                                            suma+=item.PrecioTotal;
                                        }
                                    

                                </tbody>

                            </table>


                        </div>

                        <br />
                        <div class="text-right" style="font-size: 25px;">
                            <span>Total:</span>
                            Q <span id="precio-total-c">@suma</span>
                        </div>






                    </div>












                </div>
            </div>
        </div>










        <div class="main-card mb-3 card">


        </div>


    </div>


</div>
